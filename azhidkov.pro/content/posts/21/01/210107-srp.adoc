---
title: "Single Responsibility Principle considered harmful"
date: 2021-01-07T07:25:37+07:00
draft: false
---
:source-highlighter: rouge
:rouge-theme: github
:icons: font

Наткнулся тут на https://tommcfarlin.com/programming-side-effects/[эту статью] и чёт меня малёха бомбануло.

Теоретически, принцип (Single Responsibility Principle ) возможно хороший и правильный, ток с ним есть одна проблема - анкл Боб 20 (двадцать) лет его объясняет и ни как объяснить не может.

Мне удалось отследить следующую историю формулировок этого принципа самим Мартином:

* 2003: _"A class should have only one reason to change"_ - https://www.amazon.com/Software-Development-Principles-Patterns-Practices/dp/0135974445[Agile Software Development, Principles, Patterns, and Practices]
* 2008: _"The Single Responsibility Principle (SRP) states that a class or module should have one, and only one, reason to change"_ - https://www.amazon.com/Clean-Code-Handbook-Software-Craftsmanship/dp/0132350882[Clean Code]
* 2014: _"Gather together the things that change for the same reasons. Separate those things that change for different reasons."_ - https://blog.cleancoder.com/uncle-bob/2014/05/08/SingleReponsibilityPrinciple.html[The Single Responsibility Principle]
* 2018: _"A module should be responsible to one, and only one, actor"_ - https://www.amazon.com/Clean-Architecture-Craftsmans-Software-Structure/dp/0134494164/ref=pd_bxgy_img_2/147-8271342-0171521?_encoding=UTF8&pd_rd_i=0134494164&pd_rd_r=90e2cb95-6f04-4c0c-9c7b-66c2d960039a&pd_rd_w=iwjpt&pd_rd_wg=0JqHc&pf_rd_p=f325d01c-4658-4593-be83-3e12ca663f0e&pf_rd_r=1HX5JTT8AYRP3ABYS91W&psc=1&refRID=1HX5JTT8AYRP3ABYS91W[Clean Architecture]

И тем не менее, в статье с которой меня бомбануло написано: "That class itself should do one thing".
По моим ощущениям "one thing" - это самая распространённая интерпретация SRP.

Всё бы ничего, но "thing" - понятие растяжимое.
Сортировка, например - одна вещь?
А если https://en.wikipedia.org/wiki/Timsort[один метод] в зависимости от размера входных данных использует разные алгоритмы?
Это всё ещё одна вещь или несколько?
А если https://www.freebsd.org/cgi/man.cgi?query=sort&apropos=0&sektion=0&manpath=2.9.1+BSD&arch=default&format=html[код] поддерживает сортировку массивов превышающих размер памяти и работает с диском соотвественно?

О размере вещей можно спорить бесконечно.
На небесах программисты только и говорят о том, сколько вещей делает тот или иной кусок кода.

Но даже чёрт с ней с вещью.
Сам анкл Боб путается в показаниях.
В одной из статей
[quote, Uncle Bob, https://blog.cleancoder.com/uncle-bob/2020/10/18/Solid-Relevance.html]
____
We do not mix business rules with GUI code
____

Так-то всё правильно пишет - действительно не мешаем и это хорошо.
Только изменения в требованиях от одного источника зачастую требует изменений и в гуе, и в правилах и в БД.
Т.е. эти штуки (для одной фичи) должны быть в одном месте.

В общем имхо, SRP - это хороший лозунг, который полезно знать и о котором стоит вспоминать, в третью очередь при анализе дизайна, но никак не основополагающий принцип дизайна.

И ещё не много хейта SOLID-а в целом:

* https://www.youtube.com/watch?v=tMW08JkFrBA[The SOLID Design Principles Deconstructed] - доклад от крутого во всех смыслах мужика.
Этого мужика можно его прям по https://www.youtube.com/results?search_query=Kevlin+Henney[имени по ютубить] и смотреть всё подряд.
Настоятельно рекомендую;
* https://www.tedinski.com/2019/04/02/solid-critique.html[Deconstructing SOLID design principles] - пост от другого крутого мужика, который начал (и не осилил, похоже :( ) писать книгу примерно о том же, о чём пишу я:)
Но он осилил сильно больше чем я (пока что), так что настоятельно рекомендую:)
* https://dannorth.net/2021/03/16/cupid-the-back-story/[CUPID – the back story] - неизвестный мне консультант.

И ответа Мартина на слайды из п. 3: https://blog.cleancoder.com/uncle-bob/2020/10/18/Solid-Relevance.html[Solid Relevance]
